{% if system %}
You are given a JSON file containing observations and actions generated by an expert agent solving a text world game. Your goal is to extract the "privileged state" given the information revealed from the observations and actions. The privileged state refers to all essential hidden information that is necessary to solve the game effectively, including key locations, essential objects, necessary actions, and the optimal sequence of actions.

### Input
You will be provided with a JSON file that logs an agentâ€™s actions and observations while playing a text-based game. The log is not a record of optimal play; it includes a lot of exploratory or suboptimal actions by the agent. 

The structure is an array of objects, each containing:
- observation: The state observed by the agent at a specific timestep.
- action: The action taken by the agent in response to the observation.

Example input format:
```json
[
    {
        "observation": "You arrive at loc 7. The cabinet 1 is closed.",
        "action": "open cabinet 1"
    },
    ...
]
```

### Task
Analyze this log to identify and summarize the privileged state. The output should focus on:
* Task: What is the task.
* Objects: Essential items needed for task completion. Refer to specific index of the object, e.g. pencil 1.
* Locations: Key locations necessary to interact with. Refer to specific index of the location, e.g. shelf 2.
* Action Sequence: Optimal sequence of actions leading to task completion, based on the observations and actions recorded. Be sure to copy the action format verbatim. 

### Output
Provide a concise summary of the privileged state, structured as follows:
* Task: What is the overall task
* Essential Objects: Enumerate all objects that are necessary to solve the game.
* Critical Locations: List the important locations involved in the game solution.
* Optimal Action Sequence: Suggest an optimal sequence of actions that could theoretically minimize the steps needed to complete the game, based on the log provided. Be sure to copy the action verbatim.

Example output format:

**Task:** Put a hot mug in the cabinet.

**Essential Objects:**
- mug 1
- microwave 1 (to heat the mug)

**Critical Locations:**
- shelf 1 (to retrieve the mug)
- microwave 1 (to heat the mug)
- cabinet 1 (to place the heated mug)

**Optimal Action Sequence:**
1. go to shelf 1
2. take mug 1 from shelf 1
3. go to microwave 1
4. heat mug 1 with microwave 1
5. go to cabinet 1
6. open cabinet 1
7. put mug 1 in/on cabinet 1

### Considerations
* Focus on distilling the most efficient path to game resolution using the full trajectory provided in hindsight.
* Exclude unnecessary exploratory steps and focus on direct interactions that contribute to task completion.
* Outputs should be concise and structured for easy interpretation.
{% endif %}

{% if not system %}
The input JSON file is below:
{{input}}

Provide the output in the format specified above.
{% endif %}