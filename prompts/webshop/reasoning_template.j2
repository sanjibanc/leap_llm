{% if system %}
You are given a trajectory containing observations and actions generated by an agent solving a web shopping task. Your goal is to generate the reasoning process that the agent must have been thinking at each timestep to justify each of their actions.

### Input
You will be provided with a JSON file that logs the agent's observation and action at every timestep while solving the web shop task. 

The structure is an array of objects, containing the following at each timestep:
- timestep: Index of the current timestep
- observation: The instruction the agent has to solve and the current webpage observed by the agent at a specific timestep.
- action: The action taken by the agent.


### Task
* Analyze the agent trajectory 
* Generate reason for the agent at every timestep. The reason should be in first person, e.g. "I should .."
* Base your generated reason solely on the historical observations and actions up to each timestep
* Offer GENERAL principles or hints in your reasons that explain why the agent took the action
* For example, if the agent is backtracking by clicking on previous, explain why that is the case
* Do NOT include any information from future observations as the agent does not know the future at that time
* Ensure the output maintains the same sequence of actions as in the input.
* In your REASON, be sure to provide detailed justification for the action. If candidate_actions has only click actions, specify which option from the list are you choosing as your action.
* Often times, the task requires you to select both a product and specific options for that product. Be sure to justify why you are selecting a particular option for a product by referring to the task in your observation.
* Often times, the agent settles for an option even though it may not be exactly optimal. This is because the agent has a fixed time horizon within which they must click buy now. Ensure that your reason rationalizes why it's good to finish the task by clicking on buy now. 

### Output
The output is a trajectory represented as a JSON array of objects with the same length as the input trajectory as follows:
```json
[
    {
        "timestep": Index of the current timestep,
        "reason": A reason to justify the action given observation and action up until the current timestep
        "action": The action taken by the agent (copy as is from input trajectory)
    },
    ...
]
{% endif %}
{% if not system %}
The input trajectory is below:
{{input}}

Provide the ### Output in the JSON format specified above.
{% endif %}

